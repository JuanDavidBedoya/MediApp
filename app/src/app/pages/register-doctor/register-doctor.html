<div
  class="absolute top-0 left-0 h-full w-full overflow-hidden bg-blue-900 bg-linear-to-b from-blue-700 via-blue-400 to-blue-300">
</div>

<div class="relative flex min-h-screen items-center justify-evenly rounded-3xl bg-transparent shadow-xl py-20">

  <div class="mx-auto w-full max-w-2xl rounded-2xl bg-white p-10 border-2 border-blue-500 relative">
    <div class="mb-6 text-center">
      <h3 class="text-3xl font-semibold text-blue-950">Registrar Doctor</h3>
    </div>

    @if (submissionMessage) {
    <div class="mb-4 p-4 rounded-lg text-center font-medium"
      [ngClass]="{'bg-green-100 text-green-800': submissionMessage.type === 'success', 'bg-red-100 text-red-800': submissionMessage.type === 'error'}">
      {{ submissionMessage.text }}
    </div>
    }

    <form class="grid grid-cols-1 md:grid-cols-2 gap-6" [formGroup]="registerForm" (ngSubmit)="onSubmit()">

      <!-- Columna Izquierda -->
      <div class="space-y-3">
        <!-- Cédula -->
        <div>
          <input type="text" placeholder="Cédula" name="cedula" formControlName="cedula" class="w-full rounded-lg border bg-blue-100 px-4 py-3 text-sm text-blue-950 
                   focus:border-blue-800 focus:bg-blue-200 focus:outline-none 
                   focus:scale-[1.03] transition-transform duration-300 ease-out"
            [ngClass]="{'border-red-500': f['cedula'].invalid && (f['cedula'].dirty || f['cedula'].touched)}" />
          @if (f['cedula'].invalid && (f['cedula'].dirty || f['cedula'].touched)) {
          <div class="text-red-500 text-xs mt-1 pl-1">
            @if (f['cedula'].errors?.['required']) {
            La cédula es requerida.
            }
            @if (f['cedula'].errors?.['pattern']) {
            La cédula solo debe contener números.
            }
          </div>
          }
        </div>

        <!-- Nombre -->
        <div>
          <input type="text" placeholder="Nombre Completo" name="name" formControlName="name" class="w-full rounded-lg border bg-blue-100 px-4 py-3 text-sm text-blue-950 
                   focus:border-blue-800 focus:bg-blue-200 focus:outline-none 
                   focus:scale-[1.03] transition-transform duration-300 ease-out"
            [ngClass]="{'border-red-500': f['name'].invalid && (f['name'].dirty || f['name'].touched)}" />
          @if (f['name'].invalid && (f['name'].dirty || f['name'].touched)) {
          <div class="text-red-500 text-xs mt-1 pl-1">
            @if (f['name'].errors?.['required']) {
            El nombre es requerido.
            }
          </div>
          }
        </div>

        <!-- Email -->
        <div>
          <input type="email" placeholder="Correo Electrónico" name="email" formControlName="email" class="w-full rounded-lg border bg-blue-100 px-4 py-3 text-sm text-blue-950 
                   focus:border-blue-800 focus:bg-blue-200 focus:outline-none 
                   focus:scale-[1.03] transition-transform duration-300 ease-out"
            [ngClass]="{'border-red-500': f['email'].invalid && (f['email'].dirty || f['email'].touched)}" />
          @if (f['email'].invalid && (f['email'].dirty || f['email'].touched)) {
          <div class="text-red-500 text-xs mt-1 pl-1">
            @if (f['email'].errors?.['required']) {
            El correo es requerido.
            }
            @if (f['email'].errors?.['email']) {
            El formato del correo no es válido.
            }
          </div>
          }
        </div>
      </div>

      <!-- Columna Derecha -->
      <div class="space-y-3">
        <!-- Teléfono -->
        <div>
          <input type="tel" placeholder="Teléfono" name="phone" formControlName="phone" class="w-full rounded-lg border bg-blue-100 px-4 py-3 text-sm text-blue-950 
                   focus:border-blue-800 focus:bg-blue-200 focus:outline-none 
                   focus:scale-[1.03] transition-transform duration-300 ease-out"
            [ngClass]="{'border-red-500': f['phone'].invalid && (f['phone'].dirty || f['phone'].touched)}" />
          @if (f['phone'].invalid && (f['phone'].dirty || f['phone'].touched)) {
          <div class="text-red-500 text-xs mt-1 pl-1">
            @if (f['phone'].errors?.['required']) {
            El teléfono es requerido.
            }
            @if (f['phone'].errors?.['pattern']) {
            El teléfono solo debe contener números.
            }
          </div>
          }
        </div>

        <!-- Especialidad -->
        <div>
          <select name="specialityName" formControlName="specialityName" class="w-full rounded-lg border bg-blue-100 px-4 py-3 text-sm text-blue-950 
                   focus:border-blue-800 focus:bg-blue-200 focus:outline-none 
                   focus:scale-[1.03] transition-transform duration-300 ease-out"
            [ngClass]="{'border-red-500': f['specialityName'].invalid && (f['specialityName'].dirty || f['specialityName'].touched)}">

            <option value="" disabled selected>Selecciona una Especialidad</option>

            @for (specialty of specialties.value(); track $index) {
            <option [value]="specialty.name">{{ specialty.name }}</option>
            }
          </select>
          @if (f['specialityName'].invalid && (f['specialityName'].dirty || f['specialityName'].touched)) {
          <div class="text-red-500 text-xs mt-1 pl-1">
            @if (f['specialityName'].errors?.['required']) {
            La especialidad es requerida.
            }
          </div>
          }
        </div>

        <!-- Contraseña -->
        <div class="relative">
          <input [type]="showPassword ? 'text' : 'password'" placeholder="Contraseña" name="password"
            formControlName="password" class="w-full rounded-lg border bg-blue-100 px-4 py-3 text-sm text-blue-950 
           focus:border-blue-800 focus:bg-blue-200 focus:outline-none 
           focus:scale-[1.03] transition-transform duration-300 ease-out"
            [ngClass]="{'border-red-500': f['password'].invalid && (f['password'].dirty || f['password'].touched)}" />

          <button type="button" (click)="showPassword = !showPassword"
            class="absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer">
            @if (!showPassword) {
            <svg class="h-5 w-5 text-blue-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
            } @else {
            <svg class="h-5 w-5 text-blue-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L12 12" />
            </svg>
            }
          </button>
        </div>

        @if (f['password'].invalid && (f['password'].dirty || f['password'].touched)) {
        <div class="text-red-500 text-xs mt-1 pl-1">
          @if (f['password'].errors?.['required']) {
          La contraseña es requerida.
          }
          @if (f['password'].errors?.['minlength']) {
          La contraseña debe tener al menos 6 caracteres.
          }
        </div>
        }
      </div>

      <!-- Botón de Envío -->
      <div class="md:col-span-2 flex justify-center pt-6">
        <button type="submit" [disabled]="registerForm.invalid || isSubmitting" class="w-1/2 cursor-pointer justify-center rounded-lg p-3 font-semibold tracking-wide text-white
                       bg-linear-to-br from-blue-800 via-blue-700 to-blue-800
                       transition-all duration-300 ease-in-out
                       hover:scale-105 hover:contrast-125
                       disabled:bg-gray-400 disabled:cursor-not-allowed disabled:scale-100 disabled:contrast-100">

          @if(isSubmitting) {
          <span class="animate-pulse">Registrando...</span>
          } @else {
          <span>Registrar</span>
          }
        </button>
      </div>

    </form>
  </div>
</div>